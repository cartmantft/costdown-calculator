# 기능 명세: 브릿지 아이콘, 줌 차단, 삭제 영속

**Feature Branch**: `001-bridge-zoom-delete`  
**Created**: 2025-12-02  
**Status**: Draft  
**Input**: User description: "앱 출시 요청했는데 아래와 같은 사유로 반려됐어. --- 1. 브릿지 뷰/공통 내비게이션 앱 아이콘 누락되었습니다. 2. 핀치 줌 기능 비활성화 부탁드립니다. 3. 계산 목록에서 아이템 > 목록에서 아이템 제거된 상태 확인 > 앱 재실행시 해당 아이템이 노출됩니다. 삭제가 올바르게 동작하는지 확인 부탁드립니다. --- 출시 가이드도 같이 첨부 할게할게 ---"

## 사용자 시나리오 및 테스트 *(필수)*

### 사용자 스토리 1 - 삭제한 항목은 계속 삭제 상태 (Priority: P1)

사용자는 계산 기록에서 삭제한 항목이 앱을 닫았다가 다시 열어도 되살아나지 않기를 원한다.

**왜 이 우선순위인지**: 삭제 실패는 혼란과 반복 작업을 만들고 출시 반려 사유가 된다.

**독립 테스트**: 목록에서 단일 항목을 삭제한 뒤 앱을 여러 번 재실행해도 해당 항목이 다시 나타나지 않는지 확인한다.

**인수 시나리오**:

1. **Given** 여러 항목이 있는 계산 목록에서 **When** 사용자가 한 항목을 삭제하면 **Then** 즉시 사라지고 나머지 순서는 유지된다.  
2. **Given** 이전에 삭제된 항목이 있을 때 **When** 앱을 재실행하거나 재개하면 **Then** 해당 항목은 계속 보이지 않으며 복제도 생기지 않는다.  
3. **Given** 마지막 항목을 삭제했을 때 **When** 목록으로 돌아가면 **Then** 빈 상태가 표시되고 재실행 후에도 유지된다.

---

### 사용자 스토리 2 - 브랜드 진입 화면 노출 (Priority: P2)

사용자는 토스에서 진입 시 브릿지 뷰와 공통 내비게이션 바에 앱 이름·아이콘·브랜드 색상이 보이길 원해 서비스가 공식적이며 검수를 통과할 것이라 인지한다.

**왜 이 우선순위인지**: 출시 필수 조건이며 로그인·행동 전에 신뢰를 형성한다.

**독립 테스트**: 토스에서 미니앱을 실행해 브릿지 뷰와 내비게이션 바에 이름/아이콘/색상이 함께 노출되고 화면 전환에도 일관되는지 확인한다.

**인수 시나리오**:

1. **Given** 사용자가 토스에서 미니앱을 열 때 **When** 브릿지 뷰가 뜨면 **Then** 앱 아이콘·이름·브랜드 색상이 함께 표시된 후 다음 화면으로 진행된다.  
2. **Given** 내비게이션 바가 노출된 상태에서 **When** 주요 화면을 이동하면 **Then** 같은 앱 아이콘이 깜빡임이나 플레이스홀더 없이 유지된다.  
3. **Given** 브랜드 에셋 로드가 실패했을 때 **When** 브릿지 뷰가 나타나면 **Then** 이름만 보이는 대체 표시로 진입은 막지 않고 다음 실행 시 로드를 재시도한다.

---

### 사용자 스토리 3 - 줌 제스처 차단 (Priority: P3)

사용자는 핀치 제스처 등으로 미니앱이 확대/축소되지 않아 레이아웃이 안정적으로 유지되길 원한다.

**왜 이 우선순위인지**: 출시 체크리스트 요구사항이며 의도치 않은 스케일 변경으로 인한 레이아웃 붕괴를 방지한다.

**독립 테스트**: 주요 화면에서 핀치와 더블탭 줌을 시도해도 뷰포트 스케일이 고정되고 탭·스크롤·입력은 정상 동작하는지 확인한다.

**인수 시나리오**:

1. **Given** 어떤 주요 화면에서도 **When** 사용자가 핀치 제스처를 수행하면 **Then** 화면 확대/축소가 일어나지 않고 레이아웃 크기는 그대로 유지된다.  
2. **Given** 더블탭 또는 빠른 멀티터치를 반복해도 **When** 수행 시 **Then** 줌이나 스케일 변화 없이 조작 가능 상태가 유지된다.  
3. **Given** 기기 회전 후에도 **When** 사용자가 줌을 시도하면 **Then** 스케일은 계속 차단되고 콘텐츠가 뷰포트에 맞춰 왜곡 없이 보인다.

---

### 엣지 케이스

- 브랜드 에셋이 느리거나 불가: 이름만 보이는 기본 배경으로 대체 표시 후 다음 진입 시 재시도한다.  
- 오프라인이거나 스토리지가 초기화된 상태에서 삭제: 기존 저장 데이터만 반영하고 과거 삭제 항목을 복구하지 않는다.  
- 히스토리 최대치 근접: 하나를 삭제한 뒤 새 항목을 추가해도 삭제 항목이 부활하지 않는다.  
- 접근성 설정(큰 글자 등) 상태의 줌 시도: 텍스트 크기 설정은 유지하면서 핀치 줌은 여전히 차단된다.

## 요구사항 *(필수)*

### 기능 요구사항

- **FR-001**: 브릿지 뷰는 토스 진입 시마다 앱 이름·아이콘·주 브랜드 색상을 함께 보여준 뒤 다음 단계로 넘어가야 한다.  
- **FR-002**: 공통 내비게이션 바가 보이는 모든 화면에서 동일한 앱 아이콘이 일관되게 노출돼야 한다.  
- **FR-003**: 브랜드 에셋 로드 실패 시에도 앱 식별이 가능한 대체(이름+중립 배경)를 표시해 진입을 막지 말고, 이후 실행에서 로드를 재시도해야 한다.  
- **FR-004**: 미니앱 전 화면에서 핀치·유사 제스처 기반 확대/축소를 비활성화해 뷰포트 스케일이 고정돼야 한다.  
- **FR-005**: 줌 차단은 탭, 폼 입력, 스크롤, 화면 회전을 방해하지 말아야 한다.  
- **FR-006**: 사용자가 계산 기록을 삭제하면 즉시 목록에서 제거되고, 재실행 또는 재개 후에도 표시되지 않아야 한다.  
- **FR-007**: 저장된 계산 히스토리는 최소 3회 연속 재실행 동안 삭제 상태를 유지하며 삭제 항목을 복원하거나 복제하지 말아야 한다.  
- **FR-008**: 모든 항목이 삭제된 경우 빈 상태 화면을 보여주고, 새 항목 추가 전까지 재실행 후에도 유지해야 한다.

### 핵심 엔터티 *(데이터가 관련된 경우)*

- **계산 항목(Calculation Entry)**: 심볼/레이블, 금액, 스케줄 또는 분할 정보, 정렬용 타임스탬프를 포함하는 저장된 코스트다운 또는 DCA 계산.  
- **히스토리 목록(History List)**: 최대 용량(현재 제한 10)을 가진 계산 항목의 정렬된 컬렉션으로, 로컬에 저장되며 사용자 행동(추가·삭제)에 맞춰 동기화된다.

## 성공 기준 *(필수)*

### 측정 가능한 결과

- **SC-001**: 대상 디바이스 UAT에서 첫 화면 로딩 100%가 1초 이상 빈 플레이스홀더 없이 브릿지 뷰와 내비게이션 바에 앱 이름·아이콘·브랜드 색을 함께 보여준다.  
- **SC-002**: 최소 5개 디바이스/OS 조합에서 핀치·멀티터치 줌 시도 100%가 뷰포트 스케일 변화를 일으키지 않고 다른 제스처는 응답성을 유지한다.  
- **SC-003**: 최소 10건 삭제 테스트에서 3회 연속 재실행/재개 후에도 삭제 항목 재등장 0건이며 남은 항목 순서는 유지된다.  
- **SC-004**: 브랜드 노출, 줌 차단, 삭제 영속 항목에 대해 출시 점검 체크리스트가 100% 통과하고 해당 사유로의 반려가 0건이다.
